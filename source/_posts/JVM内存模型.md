---
title: JVM内存模型
date: 2019-06-04 23:39:51
tags: Java
categories: Java基础
---
> Java与C++之间有一堵由内存分配和垃圾收集技术所围成的“高墙”，墙外的人想进去，墙内的人想出来。

————《深入理解Java虚拟机》
<!-- more -->

# 一、概述
对于 Java 程序员来说，在虚拟机自动内存管理机制下，不再需要像C/C++程序开发程序员这样为内一个 new 操作去写对应的 delete/free 操作，不容易出现内存泄漏和内存溢出问题。正是因为 Java 程序员把内存控制权利交给 Java 虚拟机，一旦出现内存泄漏和溢出方面的问题，如果不了解虚拟机是怎样使用内存的，那么排查错误将会是一个非常艰巨的任务。

# 二、运行时数据区域

Java虚拟机在执行Java程序时会把它管理的内存划分成多个不同的数据区域，每个区域有不同的职责。下图为Java1.6的内存模型图：
![Java1.6内存模型](https://zbh-blog.oss-cn-beijing.aliyuncs.com/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F.jpg) 
Jdk1.8与之前版本的区别：1.8之后方法区被彻底移除了（Jdk1.7就已经开始了），取而代之的是元空间，元空间使用的是直接内存。
我们可以使用==-XX:MetaspaceSize== 来制定元数据区域的大小。



